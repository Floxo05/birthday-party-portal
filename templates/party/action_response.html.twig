{% extends 'base.html.twig' %}

{% block title %}Antwort verwalten{% endblock %}

{% block body %}
    <div class="container mt-4">
        <h1>Zu-/Absage verwalten</h1>

        <p>Wähle bitte deine Antwort für die Party <strong>{{ party.title ?? 'Party' }}</strong> aus.</p>

        {% if currentDecision %}
            <div class="alert alert-secondary">Aktuelle Auswahl: {{ currentDecision }}</div>
        {% endif %}

        {% if isRsvpOpen %}
            {{ form_start(form) }}
            <div class="card mb-3">
                <div class="card-body">
                    <div class="d-grid gap-2 mb-3">
                        {{ form_widget(form.accept) }}
                        {{ form_widget(form.decline) }}
                    </div>

                    <div class="row g-2 align-items-center w-100">
                        <div class="col">
                            {{ form_widget(form.accept_with_guests) }}
                        </div>
                        <div class="col-auto" style="width: 60px;">
                            {{ form_widget(form.plusGuests, { attr: { style: 'width: 100%;' } }) }}
                        </div>
                        <div class="col-auto" style="width: 40px; text-align: center;">
                            <span class="badge bg-info" data-bs-toggle="collapse" href="#plus-info" role="button" aria-expanded="false" aria-controls="plus-info">i</span>
                        </div>
                        <div class="col-12">
                            <div class="collapse mt-2" id="plus-info">
                                <div class="alert alert-info" role="alert">
                                    Bei <strong>Zusage + X</strong>: Deine Begleitpersonen können sich gern über den Einladungslink
                                    einen eigenen Account anlegen, um selbst auf die Inhalte zugreifen zu können.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {{ form_end(form) }}
        {% else %}
            <div class="alert alert-warning">
                Die Rückmeldefrist ({{ party.rsvpDeadline ? party.rsvpDeadline|date('d.m.Y') : 'unbekannt' }}) ist abgelaufen. Änderungen sind nicht mehr möglich.
            </div>
        {% endif %}

        <a href="{{ path('party_show', { id: party.id }) }}" class="btn btn-link">Zurück zur Party</a>
    </div>
{% endblock %}


